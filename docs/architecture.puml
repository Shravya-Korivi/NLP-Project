@startuml
title Intelligent Document Understanding System\nPhase 1 â€” Conventional NLP (C)

skinparam componentStyle rectangle
skinparam shadowing false
skinparam linetype ortho

package "Input Layer" {
    [Raw Text Documents]
    [Search Queries]
}

package "Text Preprocessing Layer" {
    [Normalization]
    [Tokenizer]
    [Stopword Removal]
    [Stemming / Lemmatization]
}

package "Feature Extraction Layer" {
    [Unigrams / Bigrams]
    [Term Frequency]
    [Document Statistics]
}

package "Rule & Pattern Engine" {
    [Regex Rules]
    [Gazetteers\n(Skills, Orgs)]
    [Heuristics]
}

package "Statistical NLP Layer" {
    [TF-IDF Vectorizer]
    [BM25 Scorer]
    [Cosine Similarity]
}

package "Sequence Labeling Layer" {
    [CRF Feature Templates]
    [Viterbi Decoder]
    [Named Entity Output]
}

package "Interpretation & Reasoning Layer" {
    [Explainable Scoring]
    [Feature Contribution Analysis]
    [Rule-based Summarization]
}

package "Application Services" {
    [Document Classification]
    [Keyword & Skill Extraction]
    [Similarity Search]
    [Entity Extraction API]
}

package "Persistence Layer" {
    database "Vocabulary Store"
    database "IDF Statistics"
    database "Gazetteers"
    database "Rules Config"
}

package "Output Layer" {
    [Labels & Intent]
    [Extracted Keywords]
    [Named Entities]
    [Ranked Documents]
    [Summaries]
}

' ---- Data Flow ----
[Raw Text Documents] --> [Normalization]
[Search Queries] --> [Normalization]

[Normalization] --> [Tokenizer]
[Tokenizer] --> [Stopword Removal]
[Stopword Removal] --> [Stemming / Lemmatization]

[Stemming / Lemmatization] --> [Unigrams / Bigrams]
[Stemming / Lemmatization] --> [Regex Rules]

[Unigrams / Bigrams] --> [Term Frequency]
[Term Frequency] --> [TF-IDF Vectorizer]
[TF-IDF Vectorizer] --> [Cosine Similarity]
[BM25 Scorer] --> [Cosine Similarity]

[Regex Rules] --> [Keyword & Skill Extraction]
[Gazetteers\n(Skills, Orgs)] --> [Regex Rules]

[TF-IDF Vectorizer] --> [CRF Feature Templates]
[CRF Feature Templates] --> [Viterbi Decoder]
[Viterbi Decoder] --> [Named Entity Output]

[Cosine Similarity] --> [Explainable Scoring]
[Named Entity Output] --> [Explainable Scoring]
[Explainable Scoring] --> [Rule-based Summarization]

[Explainable Scoring] --> [Document Classification]
[Rule-based Summarization] --> [Summaries]

[Document Classification] --> [Labels & Intent]
[Keyword & Skill Extraction] --> [Extracted Keywords]
[Named Entity Output] --> [Named Entities]
[Similarity Search] --> [Ranked Documents]

' ---- Persistence ----
[TF-IDF Vectorizer] --> "IDF Statistics"
[Unigrams / Bigrams] --> "Vocabulary Store"
[Regex Rules] --> "Rules Config"
[Gazetteers\n(Skills, Orgs)] --> "Gazetteers"

@enduml
